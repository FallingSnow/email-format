<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `email_format` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, email_format">

    <title>email_format - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc mod">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Crate email_format</p><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'email_format', ty: 'mod', relpath: '../'};</script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Crate <a class="mod" href=''>email_format</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/email_format/lib.rs.html#1-676' title='goto source code'>[src]</a></span></h1>
<div class='docblock'>
<h1 id='email-format' class='section-header'><a href='#email-format'>email-format</a></h1>
<p>This crate allows you to construct email messages in a way that assures that
they are compliant with relevant email standards (especially RFC 5322). Invalid
data submitted will return a ParseError.</p>

<p>The main structure to work with is <code>Email</code>. It has many functions to set or add
headers and to set the body. All of these will accept an <code>&amp;str</code> or <code>&amp;[u8]</code> argument
and attempt to parse it. These setters return a <code>Result&lt;(), ParseError&gt;</code> as the
parse may fail.</p>

<h2 id='composition' class='section-header'><a href='#composition'>Composition</a></h2>
<p>You can compose an email like this:</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">email_format</span>::<span class="ident">Email</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">email</span> <span class="op">=</span> <span class="ident">Email</span>::<span class="ident">new</span>(
    <span class="string">&quot;myself@mydomain.com&quot;</span>,  <span class="comment">// &quot;From:&quot;</span>
    <span class="string">&quot;Wed, 5 Jan 2015 15:13:05 +1300&quot;</span> <span class="comment">// &quot;Date:&quot;</span>
).<span class="ident">unwrap</span>();
<span class="ident">email</span>.<span class="ident">set_sender</span>(<span class="string">&quot;from_myself@mydomain.com&quot;</span>).<span class="ident">unwrap</span>();
<span class="ident">email</span>.<span class="ident">set_reply_to</span>(<span class="string">&quot;My Mailer &lt;no-reply@mydomain.com&gt;&quot;</span>).<span class="ident">unwrap</span>();
<span class="ident">email</span>.<span class="ident">set_to</span>(<span class="string">&quot;You &lt;you@yourdomain.com&gt;&quot;</span>).<span class="ident">unwrap</span>();
<span class="ident">email</span>.<span class="ident">set_cc</span>(<span class="string">&quot;Our Friend &lt;friend@frienddomain.com&gt;&quot;</span>).<span class="ident">unwrap</span>();
<span class="ident">email</span>.<span class="ident">set_message_id</span>(<span class="string">&quot;&lt;id/20161128115731.29084.maelstrom@mydomain.com&gt;&quot;</span>).<span class="ident">unwrap</span>();
<span class="ident">email</span>.<span class="ident">set_subject</span>(<span class="string">&quot;Hello Friend&quot;</span>).<span class="ident">unwrap</span>();
<span class="ident">email</span>.<span class="ident">set_body</span>(<span class="string">&quot;Good to hear from you.\r\n\
                I wish you the best.\r\n\
                \r\n\
                Your Friend&quot;</span>).<span class="ident">unwrap</span>();

<span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">email</span>);</pre>

<p>This outputs:</p>

<pre><code class="language-text">Date:Wed, 5 Jan 2015 15:13:05 +1300
From:myself@mydomain.com
Sender:from_myself@mydomain.com
Reply-To:My Mailer &lt;no-reply@mydomain.com&gt;
To:You &lt;you@yourdomain.com&gt;
Cc:Our Friend &lt;friend@frienddomain.com&gt;
Message-ID:&lt;id/20161128115731.29084.maelstrom@mydomain.com&gt;
Subject:Hello Friend

Good to hear from you.
I wish you the best.

Your Friend
</code></pre>

<h2 id='parsing' class='section-header'><a href='#parsing'>Parsing</a></h2>
<p>The following code will parse the input bytes (or panic if the parse
failed), and leave any trailing bytes in the remainder, which should
be checked to verify it is empty.</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">email_format</span>::<span class="ident">Email</span>;
<span class="kw">use</span> <span class="ident">email_format</span>::<span class="ident">rfc5322</span>::<span class="ident">Parsable</span>;

<span class="kw">let</span> <span class="ident">input</span> <span class="op">=</span> <span class="string">&quot;Date: Wed, 5 Jan 2015 15:13:05 +1300\r\n\
             From: myself@mydomain.com\r\n\
             Sender: from_myself@mydomain.com\r\n\
             My-Crazy-Field: this is my field\r\n\
             Subject: Hello Friend\r\n\
             \r\n\
             Good to hear from you.\r\n\
             I wish you the best.\r\n\
             \r\n\
             Your Friend&quot;</span>.<span class="ident">as_bytes</span>();
 <span class="kw">let</span> (<span class="kw-2">mut</span> <span class="ident">email</span>, <span class="ident">remainder</span>) <span class="op">=</span> <span class="ident">Email</span>::<span class="ident">parse</span>(<span class="kw-2">&amp;</span><span class="ident">input</span>).<span class="ident">unwrap</span>();
 <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">remainder</span>.<span class="ident">len</span>(), <span class="number">0</span>);</pre>

<h2 id='usage-with-lettre-andor-mailstrom' class='section-header'><a href='#usage-with-lettre-andor-mailstrom'>Usage with lettre and/or mailstrom</a></h2>
<p>If compiled with the <code>lettre</code> feature, you can generate a <code>SimpleSendableEmail</code>
like this, and then use the <code>lettre</code> crate (or <code>mailstrom</code>) to send it.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">simple_sendable_email</span> <span class="op">=</span> <span class="ident">email</span>.<span class="ident">as_simple_sendable_email</span>().<span class="ident">unwrap</span>();</pre>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="mod" href="rfc5322/index.html"
                                  title='mod email_format::rfc5322'>rfc5322</a></td>
                           <td class='docblock-short'>
                                <p>This module contains nitty-gritty details about parsing, storage, and streaming
an <code>Email</code>.</p>
                           </td>
                       </tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.Email.html"
                                  title='struct email_format::Email'>Email</a></td>
                           <td class='docblock-short'>
                                
                           </td>
                       </tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="trait" href="trait.TryFrom.html"
                                  title='trait email_format::TryFrom'>TryFrom</a></td>
                           <td class='docblock-short'>
                                <p>Attempt to construct <code>Self</code> via a conversion (borrowed from rust <code>std</code>)</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "email_format";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>